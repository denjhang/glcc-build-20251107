#VCPUv4

# ======== ('CODE', 'med3', code0)
def code0():
	label('med3');
	_PROLOGUE(16,4,0xf8); # save=R3-7
	LDW(R8);STW(R7);
	LDW(R9);STW(R6);
	LDW(R10);STW(R5);
	LDW(R11);STW(R4);
	LDW(R7);STW(R3);
	STW(R8);
	LDW(R6);STW(R9);
	CALL(R4);
	_BGE('.4');
	LDW(R6);STW(R3);
	label('.4');
	LDW(R3);STW(R8);
	LDW(R5);STW(R9);
	CALL(R4);
	_BLT('.6');
	LDW(R7);XORW(R6);XORW(R3);STW(R3);
	STW(R8);
	LDW(R5);STW(R9);
	CALL(R4);
	_BGE('.8');
	LDW(R5);STW(R3);
	label('.8');
	label('.6');
	LDW(R3);
	label('.3');
	_EPILOGUE(16,4,0xf8,saveAC=True);
# ======== ('CODE', 'qsort', code1)
def code1():
	label('qsort');
	_PROLOGUE(44,8,0xff); # save=R0-7
	LDW(R8);STW(R7);
	LDW(R9);STW(R6);
	LDW(R10);STW(R5);
	LDW(R11);STW(R4);
	label('.11');
	_SP(-2+44);STW(R23);
	LDI(0);DOKE(R23);
	LDW(R6);_CMPIU(7);_BGE('.12');
	_SP(-8+44);STW(R23);
	LDW(R5);ADDW(R7);DOKE(R23);
	_BRA('.17');
	label('.14');
	_SP(-8+44);DEEK();STW(R3);
	_BRA('.21');
	label('.18');
	LDW(R3);STW(R8);
	SUBW(R5);STW(R9);
	LDW(R5);STW(R10);
	LDWI('_memswp');CALL(vAC);
	label('.19');
	LDW(R3);SUBW(R5);STW(R3);
	label('.21');
	LDW(R3);_CMPWU(R7);_BLE('.22');
	LDW(R3);SUBW(R5);STW(R8);
	LDW(R3);STW(R9);
	CALL(R4);
	_BGT('.18');
	label('.22');
	label('.15');
	_SP(-8+44);STW(R23);
	DEEK();ADDW(R5);DOKE(R23);
	label('.17');
	LDW(R6);_MUL(R5);ADDW(R7);STW(R23);
	_SP(-8+44);DEEK();_CMPWU(R23);_BLT('.14');
	_BRA('.10');
	label('.12');
	_SP(-8+44);STW(R23);
	LDW(R6);_SHRIU(1);_MUL(R5);ADDW(R7);DOKE(R23);
	LDW(R6);_CMPIU(7);_BLE('.23');
	LDW(R7);STW(R3);
	_SP(-12+44);STW(R23);
	LDW(R6);SUBI(1);_MUL(R5);ADDW(R7);DOKE(R23);
	LDW(R6);_CMPIU(40);_BLE('.25');
	_SP(-14+44);STW(R23);
	LDW(R6);_SHRIU(3);_MUL(R5);DOKE(R23);
	LDW(R3);STW(R8);
	_SP(-14+44);DEEK();STW(R23);
	ADDW(R3);STW(R9);
	LDW(R23);LSLW();ADDW(R3);STW(R10);
	LDW(R4);STW(R11);
	LDWI('med3');CALL(vAC);
	STW(R3);
	_SP(-8+44);DEEK();STW(R23);
	_SP(-14+44);DEEK();STW(R22);
	LDW(R23);SUBW(R22);STW(R8);
	LDW(R23);STW(R9);
	LDW(R22);ADDW(R23);STW(R10);
	LDW(R4);STW(R11);
	LDWI('med3');CALL(vAC);STW(R23);
	_SP(-8+44);STW(R22);
	LDW(R23);DOKE(R22);
	_SP(-12+44);DEEK();STW(R23);
	_SP(-14+44);DEEK();STW(R22);
	LSLW();STW(R21);
	LDW(R23);SUBW(R21);STW(R8);
	LDW(R23);SUBW(R22);STW(R9);
	LDW(R23);STW(R10);
	LDW(R4);STW(R11);
	LDWI('med3');CALL(vAC);STW(R23);
	_SP(-12+44);STW(R22);
	LDW(R23);DOKE(R22);
	label('.25');
	LDW(R3);STW(R8);
	_SP(-8+44);DEEK();STW(R9);
	_SP(-12+44);DEEK();STW(R10);
	LDW(R4);STW(R11);
	LDWI('med3');CALL(vAC);STW(R23);
	_SP(-8+44);STW(R22);
	LDW(R23);DOKE(R22);
	label('.23');
	LDW(R7);STW(R8);
	_SP(-8+44);DEEK();STW(R9);
	LDW(R5);STW(R10);
	LDWI('_memswp');CALL(vAC);
	LDW(R5);ADDW(R7);STW(R23);
	STW(R2);
	_SP(-4+44);STW(R22);
	LDW(R23);DOKE(R22);
	LDW(R6);SUBI(1);_MUL(R5);ADDW(R7);STW(R23);
	_SP(-6+44);STW(R22);
	LDW(R23);DOKE(R22);
	STW(R1);
	_BRA('.32');
	label('.31');
	LDW(R0);_BNE('.34');
	_SP(-2+44);STW(R23);
	LDI(1);DOKE(R23);
	_SP(-4+44);DEEK();STW(R8);
	LDW(R2);STW(R9);
	LDW(R5);STW(R10);
	LDWI('_memswp');CALL(vAC);
	_SP(-4+44);STW(R23);
	DEEK();ADDW(R5);DOKE(R23);
	label('.34');
	LDW(R5);ADDW(R2);STW(R2);
	label('.32');
	LDW(R2);_CMPWU(R1);_BGT('.36');
	LDW(R2);STW(R8);
	LDW(R7);STW(R9);
	CALL(R4);
	STW(R0);
	_BLE('.31');
	label('.36');
	_BRA('.38');
	label('.37');
	LDW(R0);_BNE('.40');
	_SP(-2+44);STW(R23);
	LDI(1);DOKE(R23);
	LDW(R1);STW(R8);
	_SP(-6+44);DEEK();STW(R9);
	LDW(R5);STW(R10);
	LDWI('_memswp');CALL(vAC);
	_SP(-6+44);STW(R23);
	DEEK();SUBW(R5);DOKE(R23);
	label('.40');
	LDW(R1);SUBW(R5);STW(R1);
	label('.38');
	LDW(R2);_CMPWU(R1);_BGT('.42');
	LDW(R1);STW(R8);
	LDW(R7);STW(R9);
	CALL(R4);
	STW(R0);
	_BGE('.37');
	label('.42');
	LDW(R2);_CMPWU(R1);_BLE('.43');
	_BRA('.29');
	label('.43');
	LDW(R2);STW(R8);
	LDW(R1);STW(R9);
	LDW(R5);STW(R10);
	LDWI('_memswp');CALL(vAC);
	_SP(-2+44);STW(R23);
	LDI(1);DOKE(R23);
	LDW(R5);ADDW(R2);STW(R2);
	LDW(R1);SUBW(R5);STW(R1);
	_BRA('.32');
	label('.29');
	_SP(-2+44);DEEK();_BNE('.45');
	_SP(-8+44);STW(R23);
	LDW(R5);ADDW(R7);DOKE(R23);
	_BRA('.50');
	label('.47');
	_SP(-8+44);DEEK();STW(R3);
	_BRA('.54');
	label('.51');
	LDW(R3);STW(R8);
	SUBW(R5);STW(R9);
	LDW(R5);STW(R10);
	LDWI('_memswp');CALL(vAC);
	label('.52');
	LDW(R3);SUBW(R5);STW(R3);
	label('.54');
	LDW(R3);_CMPWU(R7);_BLE('.55');
	LDW(R3);SUBW(R5);STW(R8);
	LDW(R3);STW(R9);
	CALL(R4);
	_BGT('.51');
	label('.55');
	label('.48');
	_SP(-8+44);STW(R23);
	DEEK();ADDW(R5);DOKE(R23);
	label('.50');
	LDW(R6);_MUL(R5);ADDW(R7);STW(R23);
	_SP(-8+44);DEEK();_CMPWU(R23);_BLT('.47');
	_BRA('.10');
	label('.45');
	_SP(-12+44);STW(R23);
	LDW(R6);_MUL(R5);ADDW(R7);DOKE(R23);
	_SP(-4+44);DEEK();STW(R23);
	LDW(R2);SUBW(R23);STW(R22);
	LDW(R23);SUBW(R7);_CMPWS(R22);_BGE('.57');
	_SP(-16+44);STW(R23);
	_SP(-4+44);DEEK();SUBW(R7);DOKE(R23);
	_BRA('.58');
	label('.57');
	_SP(-16+44);STW(R23);
	_SP(-4+44);DEEK();STW(R22);
	LDW(R2);SUBW(R22);DOKE(R23);
	label('.58');
	_SP(-10+44);STW(R23);
	_SP(-16+44);DEEK();DOKE(R23);
	LDW(R7);STW(R8);
	_SP(-10+44);DEEK();STW(R23);
	LDW(R2);SUBW(R23);STW(R9);
	LDW(R23);STW(R10);
	LDWI('_memswp');CALL(vAC);
	_SP(-6+44);DEEK();STW(R23);
	_SP(-12+44);DEEK();SUBW(R23);SUBW(R5);STW(R22);
	LDW(R23);SUBW(R1);_CMPWS(R22);_BGE('.60');
	_SP(-18+44);STW(R23);
	_SP(-6+44);DEEK();SUBW(R1);DOKE(R23);
	_BRA('.61');
	label('.60');
	_SP(-18+44);STW(R23);
	_SP(-6+44);DEEK();STW(R22);
	_SP(-12+44);DEEK();SUBW(R22);SUBW(R5);DOKE(R23);
	label('.61');
	_SP(-10+44);STW(R23);
	_SP(-18+44);DEEK();DOKE(R23);
	LDW(R2);STW(R8);
	_SP(-10+44);DEEK();STW(R23);
	_SP(-12+44);DEEK();SUBW(R23);STW(R9);
	LDW(R23);STW(R10);
	LDWI('_memswp');CALL(vAC);
	_SP(-4+44);DEEK();STW(R23);
	LDW(R2);SUBW(R23);STW(R23);
	_SP(-10+44);STW(R22);
	LDW(R23);DOKE(R22);
	_CMPWU(R5);_BLE('.62');
	LDW(R7);STW(R8);
	_SP(-10+44);DEEK();_DIVU(R5);STW(R9);
	LDW(R5);STW(R10);
	LDW(R4);STW(R11);
	LDWI('qsort');CALL(vAC);
	label('.62');
	_SP(-6+44);DEEK();SUBW(R1);STW(R23);
	_SP(-10+44);STW(R22);
	LDW(R23);DOKE(R22);
	_CMPWU(R5);_BLE('.64');
	_SP(-10+44);DEEK();STW(R23);
	_SP(-12+44);DEEK();SUBW(R23);STW(R7);
	LDW(R23);_DIVU(R5);STW(R6);
	_BRA('.11');
	label('.64');
	label('.10');
	_EPILOGUE(44,8,0xff);
# ======== (epilog)
code=[
	('CODE', 'med3', code0),
	('EXPORT', 'qsort'),
	('CODE', 'qsort', code1),
	('IMPORT', '_memswp') ]
module(code=code, name='../gigatron/libc/qsort.c', cpu=4);

# Local Variables:
# mode: python
# indent-tabs-mode: t
# End:
